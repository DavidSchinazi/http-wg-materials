Monday, 22 July 2019, Afternoon Session II (Extensions)
1550-1750, Laurier

Minutes: David Schinazi

# 15:50 - Administrivia

## 3 min - Blue sheets / scribe selection / NOTE WELL

## 2 min - Agenda bashing

# Active Extension Drafts

## 15:51 - Resource Digests for HTTP - Lucas Pardue

Martin Thomson (MT): I like this, few minor comments - will raise as issues
There's already an IANA registry for hash functions
Relationship with SRI? How do they interact?
Reoberto Peon: Structured Headers: it would be nice to encode this in binary
Jeffrey Yasskin: The SRI question should go to W3C
Roy Fielding (on jabber) +1 to draft-ietf-httpbis-digest-headers-00 but it might be nice to have a litle more discussion in draft about why the authors think these fields will be useful in future
MT: What principles do we use to define new digest schemes? How do we encode parameterized digests?
Roberto Polli: +1 to MT's comment, parameterizing would solve many issues

## 5 min - Using TLS 1.3 with HTTP/2 - David Benjamin

MT: Can we just last call this?
Patrick MacManus: Check the list soon after this week

## 5 min - Proxy-Status - Piotr Sikora

Issue 808
Alessandro Ghedini: Will new status codes need to define new Proxy-Status
Mnot: No, Proxy-Status just means that the status code was generated by the proxy
Issue 821
Chris Lemons: In the previous proposal, multiple proxies in the chain could have returned different errors
Discussion of caches, which is the next draft in the agenda
Roy F: Why not just use the HTTP 3 digit status code? This tried to refine semantics
Bryan Call: We do this in Apache Traffic Server using a custom header, it allows having it for each hop. Can't this be added to Forwarded?
mnot: Forwarded is a request header. This is a much larger discussion
Roy F (via jabber): I agree when it is new information and not an existing code
MT: What's the relationship between this and Via / CDN-Loop / Cache?
mnot: this is for intermediaries whereas some of the others are request headers. Separating this information out allows robust parsing on clients
MT: Suggest splitting Proxy-Info and Proxy-Status into separate drafts

## 16:27 - The Cache HTTP Response Header - Mnot

Issue 766
Roy F (jabber):  I'd really really really prefer this be called Cache-Status (mostly because that aligns it with cache-control and potential future fields that help us isolate semantics specific to caches)
Colin Bendell: We emit these multiple times for beaconing purposes, it would be nice to have a standard so we can send this only once. Also, is there a way to opt in to enable these debug headers?
Mnot: This is currently on a case-by-case basis, negotiating it might be difficult, let's not focus on it for now
Matt Stock: This is clean but it might be very hard to do in practice
Chris Lemons: Different caches have different interpretations of some of these words so we should define them clearly and make sure existing implementations don't use their current understanding
Alessandro: The more complicated one can be implemented by using the previous stack and converting / splitting up values. This wouldn't be that hard. Problem: this information is mostly consumed by humans so having a bunch more fields might make it hard to read as a human
Chris Lemons: Apache Traffic Server: someone will implement this
Roberto Peon: Browsers also have a cache, and it's problematic... Should we use HTTP to probe the local cache like we probe remote ones?
Bryan Call: Please add a way to mention that the cache came from RAM
Thomas Peterson: is there not room for allowing for free-form values here for implementations that can't fit in any of these fields?
mnot: need a good extensibility story
mnot: next step: refactor

## 16:38 - Variants - mnot
Not much progress here, waiting for implementations
How do variants work with cookies? That would open up use cases
Colin Blendell: We have an internal implementation and it works well

## 16:40 - BCP56bis - mnot
This used to be blocked on core
Going over issues list
Roy Fielding (jabber): Those all sound like core issues to me
mnot: disagrees for 840 and 774
Chris Lemons: Users forget that stale exists, having more visibility is goiong to increase the quality of implementations
Roy F: shrug

## 16:45 - Secondary Certificates - Mike Bishop
Kyle Nekritz: We have a partial implementation
MT: Do not ship this before we have interoperable implementations
Nick Sullivan: Cloudflare has a server implementation, we would like clients to test it

## 16:48 - Structured Headers - mnot
Going over recent changes
Issue 848
MT: can we confirm that this is not specific to the C programming language?
Roy Fielding (jabber): do we have anyone who need float (other than int/1000)?
mnot: problem is existing headers
Roberto Peon: floats give you more precision, if we want to make the tradeoff we should change the name. We may not have widespread use of floats because of how expensive they are to serialize as strings, would be nice to fix that
Chris Lemons: Suggest fixed-point as name
MT: suggests decimal, then can be stored as an integer
Chris Lemon: Changing the storage will change the bounds, could break people's expectations
Roy Fielding (jabber): +1 fixed-point
MT: we have 10/15 digits on integers, put half on each side of the dot
Chris Lemons: +1
Issue 844
Roberto Peon: if you allow it, this will increase size over the wire. If this is rare it would be nice to disallow and fall back to ASCII headers
Roy Fielding (jabber): +1 to just sending utf-8 for structured headers
Issue 842
Kazuho Oku: we should do this
Roberto Peon: How do you encode a dict containing an empty dict?
mnot: not the issue here
Julian Reschke (jabber):  it *is* this issue, in that it would resolve it
Issue 801
Roberto Peon: mnot is right, this is not a problem
Issue 782
mnot: this is a footgun, would like to close without action
Kazuho: weak preference, do not add URIs
MT: agree, this is hard to specify correctly
Roy Fielding (jabber): so, we can't have a URI type because a non-standards org has an opinion about which spec to reference? >(
Chris Lemons: we're just going to encode as utf-8 and might get it wrong
Julian Reschke (jabber): the interop argument actually makes me think we should add this, because it would actually help the consumers, because we would define how it works
mnot: browsers already have a URI parser and won't want to add a new one
Roy: I don't care what the recipient does with the string -- I just want the sender to tell me it is a reference to a URI
Julian Reschke: +1
Matt Stock: this is too complex
Ryan Sleevi: Support punting this issue. The goal here would be to define error processing model and that yak shaving has been going on for a decade and we're not there yet
Roberto Peon: Advantage of structured headers is how we encode things on the wire, and how we represent to the user. Let's talk about this separately
Roy Fielding: then why have any strong typing?
Tommy Pauly: organizing hum, do you want to
1) we should leave this out of the doc (humm in room)
2) we should add a strong definition to the doc (no hums)
3) we should keep discussing (no hums)

## 10 min - Client Hints - Yoav Weiss
Issue: Sec-CH prefix
mnot: we shouldn't infer properties based on prefixes
Chris Lemons: if there's a convention someone is going to write software assuming that
MT: we're defining the set of rules for Client Hints, should we force Sec- as a prefix?
Yoav: a prefix will make implementations easier
Issue: structured headers
no objections in room
Issue: active vs passive fingerprinting
MT:answer depends on which client hint and how often it changes. Thanks for doing the privacy considerations work, we're almost there
Issue: client hints could end up in logs
Ryan Sleevi: There were a lot of concerns when developing web crypto API, topic was about accidental leaking of information. This threat is not from a malicious actor but accidental. A Sec-CH prefix may help intermediaries to explicitly not log this information
MT: +1. These are defined for consumption by CDNs so these CDNs might want to log this since it'll impact their behavior
Topic: HTTPSVC + Client Hints
This will be discussed on Thursday

## 5 min - RFC6265bis
This draft was skipped

# Proposed / Related Work

## 30 min - HTTP 2/3 Prioritisation
Roberto Peon: what matters is what implementations do, not the spec. So h2 priorities failed, let's move on. Need priorities
Kazuho: We should remove priorities from h3
Mike Bishop: multiplexing without priorities is a half-shipped feature
MT: we need prioritization but not signaling of priorities